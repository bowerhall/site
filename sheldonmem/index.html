<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sheldonmem</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <div class="wrap">
            <a href="/" class="logo">
                <svg class="logo-mark" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="3" width="8" height="8" fill="currentColor"/>
                    <rect x="13" y="13" width="8" height="8" fill="currentColor"/>
                    <rect x="13" y="3" width="8" height="8" fill="currentColor" opacity="0.4"/>
                    <rect x="3" y="13" width="8" height="8" fill="currentColor" opacity="0.4"/>
                </svg>
                <span>bowerhall</span>
            </a>
            <nav class="nav">
                <a href="https://github.com/bowerhall/sheldon/tree/main/pkg/sheldonmem">github</a>
                <a href="https://pkg.go.dev/github.com/bowerhall/sheldon/pkg/sheldonmem">godoc</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="wrap product">
            <h1>sheldonmem</h1>
            <p class="lead">The brain your agent needs. One SQLite file stores entities, facts, relationships, and vectors. No Postgres, no Redis, no Pinecone. Copy one file to back up everything.</p>

            <div class="cmd-block">
                <div class="cmd-label">Install</div>
                <div class="cmd-code">go get github.com/bowerhall/sheldon/pkg/sheldonmem</div>
            </div>

            <div class="section-title">Data model</div>
            <ul class="features">
                <li>
                    <strong>Entities</strong>
                    People, places, projects, concepts. Named nodes in the graph.
                </li>
                <li>
                    <strong>Facts</strong>
                    Key-value pairs attached to entities. Confidence-scored. Domain-tagged.
                </li>
                <li>
                    <strong>Edges</strong>
                    Typed relationships between entities. "works_at", "lives_in", "knows".
                </li>
                <li>
                    <strong>Vectors</strong>
                    sqlite-vec for semantic search. Ollama embeddings by default, or bring your own.
                </li>
            </ul>

            <div class="section-title">Short-term vs long-term</div>
            <ul class="features">
                <li>
                    <strong>Notes for mutable state</strong>
                    Shopping lists, weekly plans, habit streaks. Keys live in system prompt, content loads on-demand.
                </li>
                <li>
                    <strong>Facts for long-term memory</strong>
                    "User lives in Portland", "User is vegetarian". Archived with vectors, recalled via hybrid search.
                </li>
                <li>
                    <strong>Context efficiency</strong>
                    System prompt sees keys only, not content. Base context stays small while state grows.
                </li>
            </ul>

            <div class="section-title">Features</div>
            <ul class="features">
                <li>
                    <strong>14 life domains</strong>
                    Identity, health, relationships, work, finances, goals, routines, etc. Facts tagged for scoped retrieval.
                </li>
                <li>
                    <strong>Hybrid search</strong>
                    Keyword matching + vector similarity in one query. Results ranked by combined score.
                </li>
                <li>
                    <strong>Contradiction resolution</strong>
                    New facts supersede old ones on the same field. "city=NYC" → "city=Portland" auto-archives NYC.
                </li>
                <li>
                    <strong>Time-based queries</strong>
                    "since: 2025-02-20", "time_range: last_week". Explicit temporal retrieval.
                </li>
                <li>
                    <strong>Salience decay</strong>
                    Old, unused facts fade. Keeps agent context relevant over time.
                </li>
                <li>
                    <strong>Memory-linked crons</strong>
                    Crons store a keyword, not a message. At fire time, recall current context and decide what to say.
                </li>
            </ul>

            <div class="cmd-block">
                <div class="cmd-label">Usage</div>
                <div class="cmd-code">store, _ := sheldonmem.Open("memory.db")
store.SetEmbedder(embedder)

// Store facts (7=career, 9=place)
store.AddFact(&userID, 7, "role", "engineer", 0.9)
store.AddFact(&userID, 9, "city", "Portland", 0.9)

// Hybrid recall
results, _ := store.Recall(ctx, "where does user work", nil, 5)

// Time-based recall
since := time.Now().AddDate(0, 0, -7)
results, _ := store.RecallWithOptions(ctx, "*", nil, 10, RecallOptions{
    Since: &since,
})</div>
            </div>

            <div class="btn-row">
                <a href="https://github.com/bowerhall/sheldon/tree/main/pkg/sheldonmem" class="btn">GitHub</a>
                <a href="https://pkg.go.dev/github.com/bowerhall/sheldon/pkg/sheldonmem" class="btn">Go docs</a>
            </div>
        </div>
    </main>

    <footer>
        <div class="wrap">
            <span>bowerhall © 2025</span>
            <a href="mailto:hello@bowerhall.ai">hello@bowerhall.ai</a>
        </div>
    </footer>
</body>
</html>
